{"version":3,"sources":["../../src/components/ActionSheet.js"],"names":["ActionPanel","options","init","self","main","getMain","events","currentCancelEvent","cancel","apply","hide","on","opttype","$","data","currentEventHandler","call","panel","inner","closeOnTouchBlack","getTemplate","result","tip","push","actions","forEach","item","getItemTemplate","join","text","show","dispose","off","remove"],"mappings":";;;;;;;;;;;;;;;AAEA;;;;IAEaA,W,WAAAA,W;AACT,yBAAYC,OAAZ,EAAqB;AAAA;;AACjB,aAAKA,OAAL,GAAeA,OAAf;AACA,aAAKC,IAAL;AACH;;;;+BAEM;AAAA;;AACH,gBAAIC,OAAO,IAAX;AACAA,iBAAKC,IAAL,GAAYD,KAAKE,OAAL,EAAZ;AACA,gBAAIC,SAASH,KAAKF,OAAL,CAAaK,MAA1B;AACA,gBAAIC,qBAAqBD,OAAOE,MAAhC;AACAF,mBAAOE,MAAP,GAAgB,YAAM;AAClBD,sCAAsBA,mBAAmBE,KAAnB,OAAtB;AACAN,qBAAKO,IAAL;AACH,aAHD;AAIAP,iBAAKC,IAAL,CAAUO,EAAV,CAAa,OAAb,EAAsB,QAAtB,EAAgC,YAAY;AACxC,oBAAIC,UAAUC,EAAE,IAAF,EAAQC,IAAR,CAAa,SAAb,CAAd;AACA,oBAAIC,sBAAsBT,OAAOM,OAAP,CAA1B;AACAG,uCAAuBA,oBAAoBC,IAApB,CAAyB,IAAzB,CAAvB;AACH,aAJD;AAKAb,iBAAKc,KAAL,GAAa,iBAAU;AACnBC,uBAAOf,KAAKC,IADO;AAEnBe,mCAAmB;AAFA,aAAV,CAAb;AAIH;;;kCAES;AACN,mBAAON,EAAE,KAAKO,WAAL,EAAF,CAAP;AACH;;;sCAEa;AACV,gBAAIC,SAAS,CAAC,yCAAD,CAAb;AACA,gBAAIlB,OAAO,IAAX;AACA,gBAAIF,UAAUE,KAAKF,OAAnB;AACA,gBAAIA,QAAQqB,GAAZ,EAAiB;AACbD,uBAAOE,IAAP,CAAY,2CACNtB,QAAQqB,GADF,GAEN,OAFN;AAIH;AACDrB,oBAAQuB,OAAR,CAAgBC,OAAhB,CACI,UAACC,IAAD,EAAU;AACNL,uBAAOE,IAAP,CAAYpB,KAAKwB,eAAL,CAAqBD,IAArB,CAAZ;AACH,aAHL;AAKAL,mBAAOE,IAAP,CAAY,OAAZ;AACA,mBAAOF,OAAOO,IAAP,CAAY,EAAZ,IACD,4CADC,GAEC,yDAFD,GAGD,QAHN;AAIH;;;wCAEeF,I,EAAM;AAClB,gEACgCA,KAAKd,OADrC,UACiDc,KAAKG,IADtD;AAGH;;;+BAEM;AACH,iBAAKZ,KAAL,CAAWa,IAAX;AACH;;;+BAEM;AACH,iBAAKb,KAAL,CAAWP,IAAX;AACH;;;kCAES;AACN,iBAAKO,KAAL,CAAWc,OAAX;AACA,iBAAK3B,IAAL,CAAU4B,GAAV,CAAc,OAAd,EAAuBC,MAAvB;AACH","file":"ActionSheet.js","sourcesContent":["\n\nimport {Panel} from './Panel';\n\nexport class ActionPanel {\n    constructor(options) {\n        this.options = options;\n        this.init();\n    }\n\n    init() {\n        let self = this;\n        self.main = self.getMain();\n        let events = self.options.events;\n        let currentCancelEvent = events.cancel;\n        events.cancel = () => {\n            currentCancelEvent && currentCancelEvent.apply(this);\n            self.hide();\n        };\n        self.main.on('click', 'button', function () {\n            let opttype = $(this).data('opttype');\n            let currentEventHandler = events[opttype];\n            currentEventHandler && currentEventHandler.call(this);\n        });\n        self.panel = new Panel({\n            inner: self.main,\n            closeOnTouchBlack: true\n        });\n    }\n\n    getMain() {\n        return $(this.getTemplate());\n    }\n\n    getTemplate() {\n        let result = ['<div class=\"component-actionsheet\"><ul>'];\n        let self = this;\n        let options = self.options;\n        if (options.tip) {\n            result.push('<li class=\"component-actionsheet-tip\">'\n                + options.tip\n                + '</li>'\n            );\n        }\n        options.actions.forEach(\n            (item) => {\n                result.push(self.getItemTemplate(item));\n            }\n        );\n        result.push('</ul>');\n        return result.join('')\n            + '<div class=\"component-actionsheet-cancel\">'\n            +   '<button type=\"button\" data-opttype=\"cancel\">取消</button>'\n            + '</div>';\n    }\n\n    getItemTemplate(item) {\n        return `\n            <li><button data-opttype=\"${item.opttype}\">${item.text}</button></li>\n        `;\n    }\n\n    show() {\n        this.panel.show();\n    }\n\n    hide() {\n        this.panel.hide();\n    }\n\n    dispose() {\n        this.panel.dispose();\n        this.main.off('click').remove();\n    }\n\n}\n"]}