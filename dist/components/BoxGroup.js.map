{"version":3,"sources":["../../src/components/BoxGroup.js"],"names":["BoxGroup","container","options","init","html","getTemplate","boxes","find","initEvents","group","klass","on","target","$target","$","$parent","parent","mode","checked","each","index","item","active","removeClass","addClass","normal","trigger","result","dataSource","forEach","value","label","push","name","join"],"mappings":"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","file":"BoxGroup.js","sourcesContent":["\nimport { EventBase } from './EventBase';\n\n\nexport class BoxGroup extends EventBase {\n    constructor(container, options) {\n        super(container);\n        this.options = options;\n        this.init();\n    }\n    init() {\n        this.container.html(\n            this.getTemplate()\n        );\n        this.boxes = this.container.find('input[type=\"checkbox\"]');\n        this.initEvents();\n    }\n    initEvents() {\n\n        let group = this;\n        let options = group.options;\n        let container = group.container;\n        let klass = options.klass || {};\n\n        container.on('click', 'input[type=\"checkbox\"]', function() {\n            let target = this;\n            let $target = $(target);\n            let $parent = $target.parent();\n\n            if (options.mode === 'single') {\n\n                if (!target.checked) {\n                    return;\n                }\n                group.boxes.each(\n                    (index, item) =>{\n                        if (item !== target ) {\n                            item.checked = false;\n                            if (klass.active) {\n                                $(item).parent().removeClass(klass.active)\n                                    .addClass(klass.normal);\n                            }\n\n                        }\n                    }\n                );\n            }\n\n\n            if (klass.active) {\n                if (target.checked) {\n                    $parent.addClass(klass.active).removeClass(klass.normal);\n                }\n                else {\n                    $parent.removeClass(klass.active).addClass(klass.normal);\n                }\n            }\n\n            group.trigger('changed');\n        });\n    }\n    getTemplate() {\n        let result = [];\n        let options = this.options;\n        let klass = options.klass || {};\n        let dataSource = options.dataSource;\n        dataSource.forEach(\n            (item, index) => {\n                if (typeof item !== 'object') {\n\n                    dataSource[index] = {\n                        value: index,\n                        label: item\n                    };\n                    item = dataSource[index];\n                }\n\n\n                result.push(`\n                    <label class=\"${klass.normal}\">\n                        <input name=\"${options.name}\" type=\"checkbox\" value=\"${item.value}\"/>\n                        ${item.label}\n                    </label>\n                `);\n\n            }\n        );\n\n        return result.join('');\n    }\n\n    getValue() {\n        let result = [];\n        let dataSource = this.options.dataSource;\n        this.boxes.each(\n            (index, item) => {\n                if (item.checked) {\n                    result.push(dataSource[index]);\n                }\n            }\n        );\n\n        return result;\n    }\n\n    changeMode(mode) {\n        let options = this.options;\n        if (mode === options.mode) {\n            return;\n        }\n        else if (mode === 'single') {\n            this.boxes.each(\n                (index, item) => {\n                    item.checked = false;\n                    $(item).parent().removeClass(options.klass.active);\n                }\n            );\n            this.trigger('changed');\n        }\n\n        this.options.mode = mode;\n\n\n    }\n}\n"]}