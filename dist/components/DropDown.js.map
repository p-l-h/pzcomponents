{"version":3,"sources":["../../src/components/DropDown.js"],"names":["$window","$","window","DropDown","options","init","self","main","getMain","events","on","opttype","data","currentEventHandler","call","appendTo","document","body","e","contains","target","hide","getTemplate","result","actions","forEach","item","push","getItemTemplate","join","text","elem","position","windowWidth","width","bodyHeight","height","offset","right","left","top","bottom","addClass","setPosition","pos","coordinate","css","key","show"],"mappings":"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","file":"DropDown.js","sourcesContent":["\n\nconst $window = $(window);\n\nexport class DropDown {\n    constructor(options) {\n        this.options = options;\n        this.init();\n    }\n\n    init() {\n        let self = this;\n        self.main = self.getMain();\n\n        let events = self.options.events;\n\n        self.main.on('click', 'button', function () {\n            let opttype = $(this).data('opttype');\n\n            let currentEventHandler = events[opttype];\n\n            currentEventHandler && currentEventHandler.call(this);\n\n        });\n\n        self.main.appendTo($(document.body));\n\n        $(document.body).on('click', (e) => {\n            if (!$.contains(self.main[0], e.target)) {\n                self.hide();\n            }\n        });\n    }\n\n    getMain() {\n        return $(this.getTemplate());\n    }\n\n    getTemplate() {\n        let result = ['<div class=\"component-dropdown\"><ul>'];\n        let self = this;\n        self.options.actions.forEach(\n            (item) => {\n                result.push(self.getItemTemplate(item));\n            }\n        );\n       \n        result.push('</ul>');\n\n        return result.join('');\n    }\n\n    getItemTemplate(item) {\n        return `\n            <li><button data-opttype=\"${item.opttype}\">${item.text}</button></li>\n        `;\n    }\n\n    attachTo(elem) {\n\n        let self = this;\n        let options = self.options;\n\n        options.position = options.position || 'left';\n        \n        // let scrollTop = $window.scrollTop();\n        // let scrollLeft = $window.scrollLeft();\n        let windowWidth = $window.width();\n        let bodyHeight = $(document.body).height();\n        let offset = elem.offset();\n\n        let position = {};\n\n        switch(options.position) {\n        case 'left':\n            position.right = windowWidth - offset.left;\n            position.top = offset.top + offset.height /2;\n            break;\n        case 'top':\n            position.bottom = bodyHeight - offset.top;\n            position.left = offset.left;\n            break;\n        case 'right':\n            position.top = offset.top;\n            position.right = offset.left + offset.width;\n            break;\n        case 'bottom':\n            position.top = offset.top + offset.height;\n            position.left = offset.left;\n            break;\n        default:\n            break;\n        }\n        self.main.addClass('component-dropdown-' + options.position);\n        self.setPosition(position);\n    }\n    \n    setPosition(pos) {\n        let self = this;\n        self.coordinate = pos;\n\n        let css = {};\n        for (let key in pos) {\n            css[key] = pos[key] + 'px';\n        }\n\n        self.main.css(css);   \n    }\n\n    getPosition() {\n        return this.coordinate;\n    }\n   \n    show() {\n        this.main.show();\n    }\n\n    hide() {\n        this.main.hide();\n    }\n}"]}