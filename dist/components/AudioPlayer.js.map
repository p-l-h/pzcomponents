{"version":3,"sources":["../../src/components/AudioPlayer.js"],"names":["AudioPlayer","container","options","init","self","timeProgress","skin","addClass","url","data","total","value","html","getTemplate","audio","children","find","setValueUpdatedByHand","currentTime","initEvents","css","getClass","on","playing","pause","play","addEventListener","setTotal","duration","removeClass","setValue","suffix"],"mappings":"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","file":"AudioPlayer.js","sourcesContent":["\n\n\nimport { TimeProgress } from './TimeProgress';\n\nexport class AudioPlayer {\n    constructor(container, options) {\n        this.container = container;\n        this.options = options || {};\n\n\n        this.init();\n    }\n\n    init() {\n        let self = this;\n        let options = self.options;\n        let container = self.container;\n\n        options.timeProgress = options.timeProgress || {};\n\n        if (options.skin) {\n            self.container.addClass('skin-' + options.skin);\n            options.timeProgress.skin = options.skin;\n        }\n\n        if (!options.url) {\n            options.url = container.data('url');\n        }\n\n        if (!options.timeProgress.total) {\n            options.timeProgress.total = container.data('seconds');\n            options.timeProgress.value = options.timeProgress.value || 0;\n        }\n\n        container.html(self.getTemplate() + container.html());\n        self.audio = self.container.children('audio')[0];\n        self.timeProgress = new TimeProgress(\n            self.container.find('.component-timeprogress'),\n            self.options.timeProgress\n        );\n\n        self.timeProgress.setValueUpdatedByHand(\n            function (currentTime) {\n                self.audio.currentTime = currentTime;\n            }\n        );\n\n\n        self.initEvents();\n        container.css('display', 'block');\n\n    }\n\n\n    initEvents() {\n        let self = this;\n        let audio = self.audio;\n        self.container.find('.' + self.getClass('toggle'))\n            .on('click', function () {\n\n                if (self.playing) {\n                    audio.pause();\n                }\n                else {\n                    audio.play();\n                    self.container.addClass('active');\n                }\n\n                self.playing = !self.playing;\n            });\n\n        audio.addEventListener('durationchange' , function () {\n            self.timeProgress.setTotal(audio.duration);\n        });\n\n\n        audio.addEventListener('pause', function () {\n\n            self.container.removeClass('active');\n            self.playing = false;\n        });\n\n        audio.addEventListener('timeupdate', function () {\n\n            let currentTime = audio.currentTime;\n            self.timeProgress.setValue(currentTime);\n\n        });\n\n    }\n\n    getTemplate() {\n        let self = this;\n        return `\n            <div class=\"${self.getClass('toggle')}\">\n                <i class=\"ion-play\"></i>\n                <i class=\"ion-pause\"></i>\n            </div>\n            <div class=\"component-timeprogress\">\n            </div>\n            <div class=\"${self.getClass('volume')}\">\n            </div>\n            <audio preload=\"metadata\"  controls>\n                <source src=\"${self.options.url}\" type=\"audio/mpeg\" codecs=\"mp3\"></source>\n            </audio>\n        `;\n    }\n\n    getClass(suffix) {\n        return 'component-audioplayer' + (suffix ? ('-' + suffix) : '');\n    }\n\n}\n"]}