{"version":3,"sources":["../../src/components/AudioPlayer.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAGA;;;;IAEa,W,WAAA,W;AACT,yBAAY,SAAZ,EAAuB,OAAvB,EAAgC;AAAA;;AAC5B,aAAK,SAAL,GAAiB,SAAjB;AACA,aAAK,OAAL,GAAe,WAAW,EAA1B;;AAGA,aAAK,IAAL;AACH;;;;+BAEM;AACH,gBAAI,OAAO,IAAX;AACA,gBAAI,UAAU,KAAK,OAAnB;AACA,gBAAI,YAAY,KAAK,SAArB;;AAEA,oBAAQ,YAAR,GAAuB,QAAQ,YAAR,IAAwB,EAA/C;;AAEA,gBAAI,QAAQ,IAAZ,EAAkB;AACd,qBAAK,SAAL,CAAe,QAAf,CAAwB,UAAU,QAAQ,IAA1C;AACA,wBAAQ,YAAR,CAAqB,IAArB,GAA4B,QAAQ,IAApC;AACH;;AAED,gBAAI,CAAC,QAAQ,GAAb,EAAkB;AACd,wBAAQ,GAAR,GAAc,UAAU,IAAV,CAAe,KAAf,CAAd;AACH;;AAED,gBAAI,CAAC,QAAQ,YAAR,CAAqB,KAA1B,EAAiC;AAC7B,wBAAQ,YAAR,CAAqB,KAArB,GAA6B,UAAU,IAAV,CAAe,SAAf,CAA7B;AACA,wBAAQ,YAAR,CAAqB,KAArB,GAA6B,QAAQ,YAAR,CAAqB,KAArB,IAA8B,CAA3D;AACH;;AAED,sBAAU,IAAV,CAAe,KAAK,WAAL,KAAqB,UAAU,IAAV,EAApC;AACA,iBAAK,KAAL,GAAa,KAAK,SAAL,CAAe,QAAf,CAAwB,OAAxB,EAAiC,CAAjC,CAAb;AACA,iBAAK,YAAL,GAAoB,+BAChB,KAAK,SAAL,CAAe,IAAf,CAAoB,yBAApB,CADgB,EAEhB,KAAK,OAAL,CAAa,YAFG,CAApB;;AAKA,iBAAK,YAAL,CAAkB,qBAAlB,CACI,UAAU,WAAV,EAAuB;AACnB,qBAAK,KAAL,CAAW,WAAX,GAAyB,WAAzB;AACH,aAHL;;AAOA,iBAAK,UAAL;AACA,sBAAU,GAAV,CAAc,SAAd,EAAyB,OAAzB;AAEH;;;qCAGY;AACT,gBAAI,OAAO,IAAX;AACA,gBAAI,QAAQ,KAAK,KAAjB;AACA,iBAAK,SAAL,CAAe,IAAf,CAAoB,MAAM,KAAK,QAAL,CAAc,QAAd,CAA1B,EACK,EADL,CACQ,OADR,EACiB,YAAY;;AAErB,oBAAI,KAAK,OAAT,EAAkB;AACd,0BAAM,KAAN;AACH,iBAFD,MAGK;AACD,0BAAM,IAAN;AACA,yBAAK,SAAL,CAAe,QAAf,CAAwB,QAAxB;AACH;;AAED,qBAAK,OAAL,GAAe,CAAC,KAAK,OAArB;AACH,aAZL;;AAcA,kBAAM,gBAAN,CAAuB,gBAAvB,EAA0C,YAAY;AAClD,qBAAK,YAAL,CAAkB,QAAlB,CAA2B,MAAM,QAAjC;AACH,aAFD;;AAKA,kBAAM,gBAAN,CAAuB,OAAvB,EAAgC,YAAY;;AAExC,qBAAK,SAAL,CAAe,WAAf,CAA2B,QAA3B;AACA,qBAAK,OAAL,GAAe,KAAf;AACH,aAJD;;AAMA,kBAAM,gBAAN,CAAuB,YAAvB,EAAqC,YAAY;;AAE7C,oBAAI,cAAc,MAAM,WAAxB;AACA,qBAAK,YAAL,CAAkB,QAAlB,CAA2B,WAA3B;AAEH,aALD;AAOH;;;sCAEa;AACV,gBAAI,OAAO,IAAX;AACA,kDACkB,KAAK,QAAL,CAAc,QAAd,CADlB,mNAOkB,KAAK,QAAL,CAAc,QAAd,CAPlB,+GAUuB,KAAK,OAAL,CAAa,GAVpC;AAaH;;;iCAEQ,M,EAAQ;AACb,mBAAO,2BAA2B,SAAU,MAAM,MAAhB,GAA0B,EAArD,CAAP;AACH","file":"AudioPlayer.js","sourcesContent":["\n\n\nimport { TimeProgress } from './TimeProgress';\n\nexport class AudioPlayer {\n    constructor(container, options) {\n        this.container = container;\n        this.options = options || {};\n\n\n        this.init();\n    }\n\n    init() {\n        let self = this;\n        let options = self.options;\n        let container = self.container;\n\n        options.timeProgress = options.timeProgress || {};\n\n        if (options.skin) {\n            self.container.addClass('skin-' + options.skin);\n            options.timeProgress.skin = options.skin;\n        }\n\n        if (!options.url) {\n            options.url = container.data('url');\n        }\n\n        if (!options.timeProgress.total) {\n            options.timeProgress.total = container.data('seconds');\n            options.timeProgress.value = options.timeProgress.value || 0;\n        }\n\n        container.html(self.getTemplate() + container.html());\n        self.audio = self.container.children('audio')[0];\n        self.timeProgress = new TimeProgress(\n            self.container.find('.component-timeprogress'),\n            self.options.timeProgress\n        );\n\n        self.timeProgress.setValueUpdatedByHand(\n            function (currentTime) {\n                self.audio.currentTime = currentTime;\n            }\n        );\n\n\n        self.initEvents();\n        container.css('display', 'block');\n\n    }\n\n\n    initEvents() {\n        let self = this;\n        let audio = self.audio;\n        self.container.find('.' + self.getClass('toggle'))\n            .on('click', function () {\n\n                if (self.playing) {\n                    audio.pause();\n                }\n                else {\n                    audio.play();\n                    self.container.addClass('active');\n                }\n\n                self.playing = !self.playing;\n            });\n\n        audio.addEventListener('durationchange' , function () {\n            self.timeProgress.setTotal(audio.duration);\n        });\n\n\n        audio.addEventListener('pause', function () {\n\n            self.container.removeClass('active');\n            self.playing = false;\n        });\n\n        audio.addEventListener('timeupdate', function () {\n\n            let currentTime = audio.currentTime;\n            self.timeProgress.setValue(currentTime);\n\n        });\n\n    }\n\n    getTemplate() {\n        let self = this;\n        return `\n            <div class=\"${self.getClass('toggle')}\">\n                <i class=\"ion-play\"></i>\n                <i class=\"ion-pause\"></i>\n            </div>\n            <div class=\"component-timeprogress\">\n            </div>\n            <div class=\"${self.getClass('volume')}\">\n            </div>\n            <audio preload=\"metadata\"  controls>\n                <source src=\"${self.options.url}\" type=\"audio/mpeg\" codecs=\"mp3\"></source>\n            </audio>\n        `;\n    }\n\n    getClass(suffix) {\n        return 'component-audioplayer' + (suffix ? ('-' + suffix) : '');\n    }\n\n}\n"]}