{"version":3,"sources":["../../src/components/TextPromptEditor.js"],"names":["TextPromptEditor","trigger","options","init","self","promptDialog","originValue","tip","hide","addHandler","dlg","val","main","find","trim","error","validateError","success","on","show"],"mappings":";;;;;;;;;;;;;;AAEA;;AACA;;AACA;;;;IAIqBA,gB;AACjB,8BAAYC,OAAZ,EAAqBC,OAArB,EAA8B;AAAA;;AAC1B,aAAKD,OAAL,GAAeA,OAAf;AACA,aAAKC,OAAL,GAAeA,OAAf;AACA,aAAKC,IAAL;AACH;;;;+BAEK;;AAEF,gBAAIC,OAAO,IAAX;AACA,gBAAIF,UAAUE,KAAKF,OAAnB;;AAGAE,iBAAKC,YAAL,GAAoB,yBAAYH,QAAQI,WAApB,EAAiCJ,QAAQK,GAAzC,CAApB;AACAH,iBAAKC,YAAL,CAAkBG,IAAlB;AACAJ,iBAAKC,YAAL,CAAkBI,UAAlB,CAA6B,KAA7B,EAAoC,YAAY;AAC5C,oBAAIC,MAAM,IAAV;;AAEA,oBAAIC,MAAMD,IAAIE,IAAJ,CAASC,IAAT,CAAc,oBAAd,EAAoCF,GAApC,GAA0CG,IAA1C,EAAV;AACA,oBAAIC,QAAQb,QAAQc,aAAR,IAAyBd,QAAQc,aAAR,CAAsBL,GAAtB,CAArC;;AAEA,oBAAII,KAAJ,EAAW;AACP,sCAAMA,KAAN;AACA;AACH;;AAEDb,wBAAQe,OAAR,IAAmBf,QAAQe,OAAR,CAAgBN,GAAhB,EAAqBD,GAArB,CAAnB;AAEH,aAbD,EAaG,KAbH;;AAiBAN,iBAAKH,OAAL,CAAaiB,EAAb,CAAgB,OAAhB,EAAyB,YAAY;AACjCd,qBAAKC,YAAL,CAAkBc,IAAlB;AACH,aAFD;AAGH;;;;;kBAnCgBnB,gB","file":"TextPromptEditor.js","sourcesContent":["\n\nimport {promptInput} from './Dialog';\nimport {toast} from './Toast';\nimport {postJson} from '../common/functions/request';\n\n\n\nexport default class TextPromptEditor {\n    constructor(trigger, options) {\n        this.trigger = trigger;\n        this.options = options;\n        this.init();\n    }\n\n    init(){\n\n        let self = this;\n        let options = self.options;\n\n\n        self.promptDialog = promptInput(options.originValue, options.tip);\n        self.promptDialog.hide();\n        self.promptDialog.addHandler('yes', function () {\n            let dlg = this;\n\n            let val = dlg.main.find('input[type=\"text\"]').val().trim();\n            let error = options.validateError && options.validateError(val);\n\n            if (error) {\n                toast(error);\n                return;\n            }\n\n            options.success && options.success(val, dlg);\n\n        }, false);\n    \n\n        \n        self.trigger.on('click', function () {\n            self.promptDialog.show();        \n        });\n    }\n}"]}