{"version":3,"sources":["../../src/components/Dialog.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;IAEa,M,WAAA,M;AACT,oBAAY,OAAZ,EAAqB;AAAA;;AACjB,aAAK,OAAL,GAAe,OAAf;AACA,aAAK,IAAL;AACH;;;;+BAEM;AACH,gBAAI,OAAO,IAAX;AACA,gBAAI,UAAU,KAAK,OAAnB;;AAEA,iBAAK,KAAL,GAAa,iBAAU;AACnB,uBAAO,KAAK,OAAL,EADY;AAEnB,mCAAmB;AAFA,aAAV,CAAb;;AAKA,oBAAQ,UAAR,IAAsB,QAAQ,UAAR,CAAmB,KAAnB,CAAyB,IAAzB,CAAtB;AAEH;;;kCAES;AACN,iBAAK,IAAL,GAAY,EAAE,KAAK,WAAL,EAAF,CAAZ;AACA,mBAAO,KAAK,IAAZ;AACH;;;sCAEa;;AAEV,gBAAI,OAAO,IAAX;AACA,gBAAI,UAAU,KAAK,OAAnB;;AAEA,gBAAI,2CACc,KAAK,QAAL,CAAc,OAAd,CADd,WACyC,QAAQ,KAAR,IAAiB,EAD1D,sBAAJ;;AAIA,gBAAI,8CACkB,KAAK,QAAL,CAAc,MAAd,CADlB,WAC4C,QAAQ,IAAR,IAAgB,EAD5D,0BAAJ;;AAIA,gBAAI,4CACc,KAAK,QAAL,CAAc,QAAd,CADd,WAC0C,QAAQ,MAAR,IAAkB,EAD5D,sBAAJ;;AAKA,kDACkB,KAAK,QAAL,EADlB,SACqC,QAAQ,IAD7C,4BAEU,SAFV,GAEsB,QAFtB,GAEiC,UAFjC;AAKH;;;gCAEO,O,EAAS;AACb,iBAAK,IAAL,CAAU,IAAV,CAAe,MAAM,KAAK,QAAL,CAAc,MAAd,CAArB,EAA4C,IAA5C,CAAiD,OAAjD;AACH;;;iCAEQ,K,EAAO;AACZ,iBAAK,IAAL,CAAU,IAAV,CAAe,MAAM,KAAK,QAAL,CAAc,OAAd,CAArB,EAA6C,IAA7C,CAAkD,KAAlD;AACH;;;+BAEM;AACH,iBAAK,KAAL,CAAW,IAAX;AACH;;;+BAEM;AACH,iBAAK,KAAL,CAAW,IAAX;AACH;;;iCAEQ,M,EAAQ;AACb,mBAAO,sBAAsB,SAAU,MAAM,MAAhB,GAA0B,EAAhD,CAAP;AACH;;;;;IAKQ,K,WAAA,K;;;AACT,mBAAY,OAAZ,EAAqB;AAAA;;AAAA,wIACX,OADW;;AAEjB,cAAK,QAAL,GAAgB,EAAhB;AACA,cAAK,UAAL;AAHiB;AAIpB;;;;qCAEY;AACT,gBAAI,OAAO,IAAX;AACA,cAAE,KAAK,IAAP,EAAa,IAAb,CAAkB,MAAM,KAAK,QAAL,CAAc,QAAd,CAAxB,EACK,EADL,CACQ,OADR,EACiB,QADjB,EAC2B,UAAU,CAAV,EAAa;;AAEhC,oBAAI,UAAU,EAAE,IAAF,EAAQ,IAAR,CAAa,SAAb,CAAd;;AAEA,oBAAI,OAAJ,EAAa;AACT,yBAAK,WAAL,CAAiB,OAAjB;AACH;AAEJ,aATL;AAUH;;;mCAEU,O,EAAS,O,EAA0B;AAAA,gBAAjB,UAAiB,uEAAN,IAAM;;AAC1C,gBAAI,OAAO,IAAX;AACA,gBAAI,WAAW,KAAK,QAApB;;AAEA,qBAAS,OAAT,IAAoB,SAAS,OAAT,KAAqB,EAAzC;AACA,oBAAQ,UAAR,GAAqB,UAArB;AACA,qBAAS,OAAT,EAAkB,IAAlB,CAAuB,OAAvB;AACA,mBAAO,IAAP;AACH;;;sCAEa,O,EAAS,O,EAAS;AAC5B,gBAAI,WAAW,KAAK,QAApB;;AAEA,gBAAI,OAAJ,EAAa;AACT,yBAAS,OAAT,EAAkB,OAAlB,CACI,UAAC,IAAD,EAAO,KAAP,EAAiB;AACb,wBAAI,SAAS,OAAb,EAAsB;AAClB,iCAAS,OAAT,EAAkB,KAAlB,IAA2B,IAA3B;AACH;AACJ,iBALL;AAOH,aARD,MASK;AACD,yBAAS,OAAT,IAAoB,EAApB;AACH;AACJ;;;oCAEW,O,EAAS;AACjB,gBAAI,OAAO,IAAX;AACA,gBAAI,WAAW,KAAK,QAApB;;AAEA,qBAAS,OAAT,EAAkB,OAAlB,CACI,UAAC,IAAD,EAAU;AACN,oBAAI,IAAJ,EAAU;AACN,yBAAK,KAAL,CAAW,IAAX;;AAEA,wBAAI,KAAK,UAAT,EAAqB;AACjB,6BAAK,aAAL,CAAmB,OAAnB,EAA4B,IAA5B;AACH;AACJ;AACJ,aATL;AAYH;;;EAhEsB,M;;AAqE3B,IAAM,cAAc,IAAI,KAAJ,CAAU;AAC1B,gFAD0B;AAI1B,UAAM;AAJoB,CAAV,CAApB;;AAOA,YAAY,UAAZ,CAAuB,IAAvB,EAA6B,YAAY;AACrC,SAAK,IAAL;AACH,CAFD,EAEG,KAFH;;AAIO,IAAM,wBAAQ,SAAR,KAAQ,CAAC,OAAD,EAAuB;AAAA,QAAb,KAAa,uEAAP,EAAO;;AACxC,gBAAY,OAAZ,CAAoB,OAApB;AACA,gBAAY,QAAZ,CAAqB,KAArB;AACA,gBAAY,IAAZ;;AAEA,WAAO,WAAP;AACH,CANM;;AASP,IAAM,gBAAgB,IAAI,KAAJ,CAAU;AAC5B,6LAD4B;AAK5B,UAAM;AALsB,CAAV,CAAtB;;AAQA,cAAc,UAAd,CAAyB,IAAzB,EAA+B,YAAY;AACvC,SAAK,IAAL;AACH,CAFD,EAEG,KAFH;;AAIO,IAAM,4BAAU,SAAV,OAAU,CAAC,OAAD,EAAuB;AAAA,QAAb,KAAa,uEAAP,EAAO;;AAC1C,kBAAc,OAAd,CAAsB,OAAtB;AACA,kBAAc,QAAd,CAAuB,KAAvB;AACA,kBAAc,IAAd;;AAEA,WAAO,aAAP;AACH,CANM;;AAQP,IAAM,eAAe,IAAI,KAAJ,CAAU;AAC3B,+LAD2B;AAK3B,UAAM;AALqB,CAAV,CAArB;AAOA,aAAa,UAAb,CAAwB,IAAxB,EAA8B,YAAY;AACtC,SAAK,IAAL;AACH,CAFD,EAEG,KAFH;;AAIO,IAAM,0BAAS,SAAT,MAAS,CAAC,WAAD,EAA2B;AAAA,QAAb,KAAa,uEAAP,EAAO;;AAC7C,iBAAa,OAAb,CAAqB,qCAAqC,WAArC,GAAmD,eAAxE;AACA,iBAAa,QAAb,CAAsB,KAAtB;AACA,iBAAa,IAAb;;AAEA,WAAO,YAAP;AACH,CANM;;AAQA,IAAM,oCAAc,SAAd,WAAc,CAAC,KAAD,EAAqB;AAAA,QAAb,KAAa,uEAAP,EAAO;;AAC5C,iBAAa,OAAb,CAAqB,+BAA+B,KAA/B,GAAuC,KAA5D;AACA,iBAAa,QAAb,CAAsB,KAAtB;AACA,iBAAa,IAAb;;AAEA,WAAO,YAAP;AACH,CANM","file":"Dialog.js","sourcesContent":["\nimport { Panel } from './Panel';\n\nexport class Dialog {\n    constructor(options) {\n        this.options = options;\n        this.init();\n    }\n\n    init() {\n        let self = this;\n        let options = self.options;\n\n        self.panel = new Panel({\n            inner: self.getMain(),\n            closeOnTouchBlack: true\n        });\n\n        options.bindEvents && options.bindEvents.apply(self);\n\n    }\n\n    getMain() {\n        this.main = $(this.getTemplate());\n        return this.main;\n    }\n\n    getTemplate() {\n\n        let self = this;\n        let options = self.options;\n\n        let titleHtml = `\n            <div class=\"${self.getClass('title')}\">${options.title || ''}</div>\n        `;\n\n        let bodyHtml = `\n                <div class=\"${self.getClass('body')}\">${options.body || ''}</div>\n            `;\n\n        let footerHtml = `\n            <div class=\"${self.getClass('footer')}\">${options.footer || ''}</div>\n        `;\n\n\n        return `\n            <div class=\"${self.getClass()} ${options.skin}\">\n                ${titleHtml}${bodyHtml}${footerHtml}\n            </div>\n        `;\n    }\n\n    setBody(content) {\n        this.main.find('.' + this.getClass('body')).html(content);\n    }\n\n    setTitle(title) {\n        this.main.find('.' + this.getClass('title')).html(title);\n    }\n\n    show() {\n        this.panel.show();\n    }\n\n    hide() {\n        this.panel.hide();\n    }\n\n    getClass(suffix) {\n        return 'component-dialog' + (suffix ? ('-' + suffix) : '');\n    }\n\n}\n\n\nexport class Popup extends Dialog {\n    constructor(options) {\n        super(options);\n        this.handlers = {};\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        let self = this;\n        $(self.main).find('.' + self.getClass('footer'))\n            .on('click', 'button', function (e) {\n\n                let opttype = $(this).data('opttype');\n\n                if (opttype) {\n                    self.callHandler(opttype);\n                }\n\n            });\n    }\n\n    addHandler(opttype, handler, autoRemove=true) {\n        let self = this;\n        let handlers = self.handlers;\n\n        handlers[opttype] = handlers[opttype] || [];\n        handler.autoRemove = autoRemove;\n        handlers[opttype].push(handler);\n        return self;\n    }\n\n    removeHandler(opttype, handler) {\n        let handlers = this.handlers;\n\n        if (handler) {\n            handlers[opttype].forEach(\n                (item, index) => {\n                    if (item === handler) {\n                        handlers[opttype][index] = null;\n                    }\n                }\n            );\n        }\n        else {\n            handlers[opttype] = [];\n        }\n    }\n\n    callHandler(opttype) {\n        let self = this;\n        let handlers = self.handlers;\n\n        handlers[opttype].forEach(\n            (item) => {\n                if (item) {\n                    item.apply(self);\n\n                    if (item.autoRemove) {\n                        self.removeHandler(opttype, item);\n                    }\n                }\n            }\n        );\n\n    }\n\n}\n\n\nconst alertDialog = new Popup({\n    footer: `\n        <button type=\"button\" data-opttype=\"ok\">好</button>\n    `,\n    skin: 'alert'\n});\n\nalertDialog.addHandler('ok', function () {\n    this.hide();\n}, false);\n\nexport const alert = (content, title='') => {\n    alertDialog.setBody(content);\n    alertDialog.setTitle(title);\n    alertDialog.show();\n\n    return alertDialog;\n};\n\n\nconst confirmDialog = new Popup({\n    footer: `\n        <button type=\"button\" class=\"btn-default btn\" data-opttype=\"no\">否</button>\n        <button type=\"button\" class=\"btn-primary btn\" data-opttype=\"yes\">是</button>\n    `,\n    skin: 'confirm'\n});\n\nconfirmDialog.addHandler('no', function () {\n    this.hide();\n}, false);\n\nexport const confirm = (content, title='') => {\n    confirmDialog.setBody(content);\n    confirmDialog.setTitle(title);\n    confirmDialog.show();\n\n    return confirmDialog;\n};\n\nconst promptDialog = new Popup({\n    footer: `\n        <button type=\"button\" class=\"btn-default btn\" data-opttype=\"no\">取消</button>\n        <button type=\"button\" class=\"btn-primary btn\" data-opttype=\"yes\">确定</button>\n    `,\n    skin: 'prompt'\n});\npromptDialog.addHandler('no', function () {\n    this.hide();\n}, false);\n\nexport const prompt = (placeholder, title='') => {\n    promptDialog.setBody('<textarea rows=\"4\" placeholder=\"' + placeholder + '\"></textarea>');\n    promptDialog.setTitle(title);\n    promptDialog.show();\n\n    return promptDialog;\n};\n\nexport const promptInput = (value, title='') => {\n    promptDialog.setBody('<input type=\"text\" value=\"' + value + '\"/>');\n    promptDialog.setTitle(title);\n    promptDialog.show();\n\n    return promptDialog;\n};\n"]}