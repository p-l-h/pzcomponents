{"version":3,"sources":["../../src/components/WeixinUploader.js"],"names":["Uploader","trigger","options","init","self","on","chooseImage","localIds","img","Image","onload","uploadImage","serverId","success","width","height","src"],"mappings":";;;;;;;;;;;;;;;AACA;;AACA;;;;IAEcA,Q,WAAAA,Q;AACV,sBAAaC,OAAb,EAAsBC,OAAtB,EAA+B;AAAA;;AAC3B,aAAKD,OAAL,GAAeA,OAAf;AACA,aAAKC,OAAL,GAAeA,OAAf;AACA,aAAKC,IAAL;AACH;;;;+BAEM;AACH,gBAAIC,OAAO,IAAX;AACA,gBAAIF,UAAUE,KAAKF,OAAnB;;AAGAE,iBAAKH,OAAL,CAAaI,EAAb,CAAgB,OAAhB,EAAyB,YAAM;AAC3B,qCAAUC,WAAV,CAAsB,CAAtB,EAAyB,UAACC,QAAD,EAAc;AACnC,wBAAIC,MAAM,IAAIC,KAAJ,EAAV;;AAEAD,wBAAIE,MAAJ,GAAa,YAAM;AACf,6CAAUC,WAAV,CAAsBJ,SAAS,CAAT,CAAtB,EAAmC,UAACK,QAAD,EAAc;AAC7CV,oCAAQW,OAAR,IAAmBX,QAAQW,OAAR,CAAgB;AAC/BD,0CAAUA,QADqB;AAE/BE,uCAAON,IAAIM,KAFoB;AAG/BC,wCAAQP,IAAIO;AAHmB,6BAAhB,CAAnB;AAMH,yBAPD;AAQH,qBATD;;AAWAP,wBAAIQ,GAAJ,GAAUT,SAAS,CAAT,CAAV;AAEH,iBAhBD;AAiBH,aAlBD;AAmBH","file":"WeixinUploader.js","sourcesContent":["\nimport {postJson} from '../common/functions/request';\nimport {weixinApi} from '../common/functions/weixinApi';\n\nexport  class Uploader {\n    constructor (trigger, options) {\n        this.trigger = trigger;\n        this.options = options;\n        this.init();\n    }\n\n    init() {\n        let self = this;\n        let options = self.options;\n\n\n        self.trigger.on('click', () => {\n            weixinApi.chooseImage(1, (localIds) => {\n                let img = new Image;\n\n                img.onload = () => {\n                    weixinApi.uploadImage(localIds[0], (serverId) => {\n                        options.success && options.success({\n                            serverId: serverId,\n                            width: img.width,\n                            height: img.height\n                        });\n\n                    });\n                };\n\n                img.src = localIds[0];\n\n            });\n        });\n    }\n\n}\n"]}