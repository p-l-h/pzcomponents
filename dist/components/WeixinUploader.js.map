{"version":3,"sources":["../../src/components/WeixinUploader.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA;;AACA;;;;IAEc,Q,WAAA,Q;AACV,sBAAa,OAAb,EAAsB,OAAtB,EAA+B;AAAA;;AAC3B,aAAK,OAAL,GAAe,OAAf;AACA,aAAK,OAAL,GAAe,OAAf;AACA,aAAK,IAAL;AACH;;;;+BAEM;AACH,gBAAI,OAAO,IAAX;AACA,gBAAI,UAAU,KAAK,OAAnB;;AAGA,iBAAK,OAAL,CAAa,EAAb,CAAgB,OAAhB,EAAyB,YAAM;AAC3B,qCAAU,WAAV,CAAsB,CAAtB,EAAyB,UAAC,QAAD,EAAc;AACnC,wBAAI,MAAM,IAAI,KAAJ,EAAV;;AAEA,wBAAI,MAAJ,GAAa,YAAM;AACf,6CAAU,WAAV,CAAsB,SAAS,CAAT,CAAtB,EAAmC,UAAC,QAAD,EAAc;AAC7C,oCAAQ,OAAR,IAAmB,QAAQ,OAAR,CAAgB;AAC/B,0CAAU,QADqB;AAE/B,uCAAO,IAAI,KAFoB;AAG/B,wCAAQ,IAAI;AAHmB,6BAAhB,CAAnB;AAMH,yBAPD;AAQH,qBATD;;AAWA,wBAAI,GAAJ,GAAU,SAAS,CAAT,CAAV;AAEH,iBAhBD;AAiBH,aAlBD;AAmBH","file":"WeixinUploader.js","sourcesContent":["\nimport {postJson} from '../common/functions/request';\nimport {weixinApi} from '../common/functions/weixinApi';\n\nexport  class Uploader {\n    constructor (trigger, options) {\n        this.trigger = trigger;\n        this.options = options;\n        this.init();\n    }\n\n    init() {\n        let self = this;\n        let options = self.options;\n\n\n        self.trigger.on('click', () => {\n            weixinApi.chooseImage(1, (localIds) => {\n                let img = new Image;\n\n                img.onload = () => {\n                    weixinApi.uploadImage(localIds[0], (serverId) => {\n                        options.success && options.success({\n                            serverId: serverId,\n                            width: img.width,\n                            height: img.height\n                        });\n\n                    });\n                };\n\n                img.src = localIds[0];\n\n            });\n        });\n    }\n\n}\n"]}