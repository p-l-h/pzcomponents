{"version":3,"sources":["../../../src/common/functions/weixinApi.js"],"names":[],"mappings":"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","file":"weixinApi.js","sourcesContent":["/**\n * @file 微信jssdk 配置\n * @author peilonghui\n */\n\n\nimport {getJson} from './request';\n\n\nconst jsApiList = [\n    'chooseWXPay', 'hideOptionMenu', 'getLocation',\n    'chooseImage', 'previewImage', 'uploadImage', 'downloadImage',\n    'startRecord', 'stopRecord', 'onVoiceRecordEnd', 'playVoice',\n    'pauseVoice', 'stopVoice', 'onVoicePlayEnd', 'uploadVoice', 'downloadVoice',\n    'onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareQZone',\n    'onMenuShareWeibo'\n];\nconst noop = () => {};\nconst wx = window.wx;\n\nconst DEFAULT_SHARE_DATA = {\n    title: '', // 分享标题\n    desc: '', // 分享描述\n    link: '', // 分享链接\n    imgUrl: '', // 分享图标\n    success: function () {\n        // 用户确认分享后执行的回调函数\n    },\n    cancel: function () {\n        // 用户取消分享后执行的回调函数\n    }\n};\n\nexport const weixinApi = {\n    getConfig: (url) => {\n        getJson(\n            url,\n            {\n                url: location.href\n            },\n            (data) => {\n                data.jsApiList = jsApiList;\n                // data.debug = true;\n                wx.config(data);\n            }\n        );\n\n    },\n    ready: (callback = noop) => {\n        wx.ready(\n            () => {\n                wx.checkJsApi({\n                    jsApiList: jsApiList,\n                    success: () => {\n                        wx.hideOptionMenu();\n                        callback();\n                    }\n                });\n            }\n        );\n    },\n    chooseImage: (limit=9, callback = noop) => {\n        wx.chooseImage({\n            count: limit,\n            success: (e) => {\n                callback(e.localIds);\n            }\n        });\n    },\n    previewImage: (current='', urls=[]) => {\n        wx.previewImage({\n            current: current,\n            urls: urls\n        });\n    },\n    uploadImage: (localId='', success=noop) => {\n        wx.uploadImage({\n            localId: localId,\n            isShowProgressTips: 0,\n            success: (response) => {\n                success(response.serverId);\n            }\n        });\n    },\n    startRecord: () => {\n        wx.startRecord();\n    },\n    stopRecord: (callback=noop) => {\n        wx.stopRecord({\n            success: (res) => {\n                callback(res.localId);\n            }\n        });\n    },\n    uploadVoice: (localId='', success=noop) => {\n        wx.uploadVoice({\n            localId: localId,\n            isShowProgressTips: 0,\n            success: (response) => {\n                success(response.serverId);\n            }\n        });\n    },\n    onVoiceRecordEnd: (callback=noop) => {\n        wx.onVoiceRecordEnd({\n            complete: (res) => {\n                callback(res.localId);\n            }\n        });\n    },\n    playVoice: (localId='') => {\n        wx.playVoice({\n            localId: localId\n        });\n    },\n    pauseVoice: (localId='') => {\n        wx.playVoice({\n            localId: localId\n        });\n    },\n    stopVoice: (localId='') => {\n        wx.stopVoice({\n            localId: localId\n        });\n    },\n    onVoicePlayEnd: (callback=noop) => {\n        wx.onVoicePlayEnd({\n            success: (response) => {\n                callback(response.localId);\n            }\n        });\n    },\n    share: (config) => {\n\n        let shareData = $.extend({}, DEFAULT_SHARE_DATA);\n        $.extend(shareData, config);\n\n        wx.onMenuShareTimeline(shareData);\n        wx.onMenuShareAppMessage(shareData);\n        wx.onMenuShareQQ(shareData);\n        wx.onMenuShareWeibo(shareData);\n        wx.onMenuShareQZone(shareData);\n    },\n    showOptionMenu: () => {\n        wx.showOptionMenu();\n    }\n};\n\n"]}