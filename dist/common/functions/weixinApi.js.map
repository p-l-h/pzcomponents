{"version":3,"sources":["../../../src/common/functions/weixinApi.js"],"names":["jsApiList","noop","wx","window","DEFAULT_SHARE_DATA","title","desc","link","imgUrl","success","cancel","weixinApi","getConfig","url","location","href","data","config","ready","callback","checkJsApi","hideOptionMenu","chooseImage","limit","count","e","localIds","previewImage","current","urls","uploadImage","localId","isShowProgressTips","response","serverId","startRecord","stopRecord","res","uploadVoice","onVoiceRecordEnd","complete","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","share","shareData","$","extend","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","showOptionMenu"],"mappings":"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","file":"weixinApi.js","sourcesContent":["/**\n * @file 微信jssdk 配置\n * @author peilonghui\n */\n\n\nimport {getJson} from './request';\n\n\nconst jsApiList = [\n    'chooseWXPay', 'hideOptionMenu', 'getLocation',\n    'chooseImage', 'previewImage', 'uploadImage', 'downloadImage',\n    'startRecord', 'stopRecord', 'onVoiceRecordEnd', 'playVoice',\n    'pauseVoice', 'stopVoice', 'onVoicePlayEnd', 'uploadVoice', 'downloadVoice',\n    'onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareQZone',\n    'onMenuShareWeibo'\n];\nconst noop = () => {};\nconst wx = window.wx;\n\nconst DEFAULT_SHARE_DATA = {\n    title: '', // 分享标题\n    desc: '', // 分享描述\n    link: '', // 分享链接\n    imgUrl: '', // 分享图标\n    success: function () {\n        // 用户确认分享后执行的回调函数\n    },\n    cancel: function () {\n        // 用户取消分享后执行的回调函数\n    }\n};\n\nexport const weixinApi = {\n    getConfig: (url) => {\n        getJson(\n            url,\n            {\n                url: location.href\n            },\n            (data) => {\n                data.jsApiList = jsApiList;\n                // data.debug = true;\n                wx.config(data);\n            }\n        );\n\n    },\n    ready: (callback = noop) => {\n        wx.ready(\n            () => {\n                wx.checkJsApi({\n                    jsApiList: jsApiList,\n                    success: () => {\n                        wx.hideOptionMenu();\n                        callback();\n                    }\n                });\n            }\n        );\n    },\n    chooseImage: (limit=9, callback = noop) => {\n        wx.chooseImage({\n            count: limit,\n            success: (e) => {\n                callback(e.localIds);\n            }\n        });\n    },\n    previewImage: (current='', urls=[]) => {\n        wx.previewImage({\n            current: current,\n            urls: urls\n        });\n    },\n    uploadImage: (localId='', success=noop) => {\n        wx.uploadImage({\n            localId: localId,\n            isShowProgressTips: 0,\n            success: (response) => {\n                success(response.serverId);\n            }\n        });\n    },\n    startRecord: () => {\n        wx.startRecord();\n    },\n    stopRecord: (callback=noop) => {\n        wx.stopRecord({\n            success: (res) => {\n                callback(res.localId);\n            }\n        });\n    },\n    uploadVoice: (localId='', success=noop) => {\n        wx.uploadVoice({\n            localId: localId,\n            isShowProgressTips: 0,\n            success: (response) => {\n                success(response.serverId);\n            }\n        });\n    },\n    onVoiceRecordEnd: (callback=noop) => {\n        wx.onVoiceRecordEnd({\n            complete: (res) => {\n                callback(res.localId);\n            }\n        });\n    },\n    playVoice: (localId='') => {\n        wx.playVoice({\n            localId: localId\n        });\n    },\n    pauseVoice: (localId='') => {\n        wx.playVoice({\n            localId: localId\n        });\n    },\n    stopVoice: (localId='') => {\n        wx.stopVoice({\n            localId: localId\n        });\n    },\n    onVoicePlayEnd: (callback=noop) => {\n        wx.onVoicePlayEnd({\n            success: (response) => {\n                callback(response.localId);\n            }\n        });\n    },\n    share: (config) => {\n\n        let shareData = $.extend({}, DEFAULT_SHARE_DATA);\n        $.extend(shareData, config);\n\n        wx.onMenuShareTimeline(shareData);\n        wx.onMenuShareAppMessage(shareData);\n        wx.onMenuShareQQ(shareData);\n        wx.onMenuShareWeibo(shareData);\n        wx.onMenuShareQZone(shareData);\n    },\n    showOptionMenu: () => {\n        wx.showOptionMenu();\n    }\n};\n\n"]}